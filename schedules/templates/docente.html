<!DOCTYPE html>
{% load static %}

<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="icon" href="https://www.umss.edu.bo/wp-content/uploads/2021/07/cropped-Logo7-32x32.png"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel=" stylesheet" href="{% static 'w3.css' %}" />

    <script src="{% static 'lib/Highcharts-10.2.1/code/highcharts.js' %}"></script>
    <script src="{% static 'lib/Highcharts-10.2.1/code/modules/series-label.js' %}"></script>
    <script src="{% static 'lib/Highcharts-10.2.1/code/modules/exporting.js' %}"></script>
    <script src="{% static 'lib/Highcharts-10.2.1/code/modules/export-data.js' %}"></script>
    <script src="{% static 'lib/Highcharts-10.2.1/code/modules/accessibility.js' %}"></script>
    

    <title>Control docente</title>


</head>

<body onload = "fillCharts({{failed_reports_by_year}},
                        {{missed_reports_by_year}},
                        {{succesful_reports_by_year}},
                        {{failed_reports_by_month}},
                        {{missed_reports_by_month}},
                        {{succesful_reports_by_month}})">
    <div class="w3-container w3-cell-row w3-margin-top">
        <div class="w3-container w3-card w3-cell" style="width: 20%">
            
            <img src="{%  static 'images/perfil.png' %}" alt="" style="width:100%">
        </div>

        <div class="w3-cell w3-container">
            <div class="w3-container w3-bar w3-black ">
                <button class="w3-bar-item w3-button" onclick="openCity('London')">Inicio</button>
                <button class="w3-bar-item w3-button" onclick="openCity('Paris')">Errores</button>
                <button class="w3-bar-item w3-button" onclick="openCity('Tokyo')">Omisiones</button>
            </div>
        </div>

        <div class="w3-cell w3-container">
            <button class="w3-red  w3-large" style="width:100%" onclick = "resetPassword()"> Reiniciar Clave</button>
        </div>
    </div>

    <div class="w3-container w3-cell-row ">
        <div class="w3-container w3-cell w3-margin-top">
            <b>Datos:</b>
            <br>
             <b> Nombre:</b> {{user.full_name}}
            <br>
            <b>Codigo Sis:</b>{{user.codsis}}
            <br>
            <b>Facultad:</b>{{user.faculty}}
            <br>
            <b>E-Mail:</b>{{user.contact_mail}}
            <br>
            <b>Última Conexión:</b>{{user.last_connection}}
        </div>
        <div class="w3-container w3-margin-top w3-cell">
            <div class="w3-center">

            </div>

        </div>

    </div>
    <div>
        <select name="year" id="selectYear" onchange = "getDataCharts()">
            <option value=2020>2020</option>
            <option value=2021>2021</option>
            <option value=2022>2022</option>

        </select>

        <select name="month" id="selectMonth" onchange = "getDataCharts()">
            <option value=1>Enero</option>
            <option value=2>Febrero</option>
            <option value=3>Marzo</option>
            <option value=4>Abril</option>
            <option value=5>Mayo</option>
            <option value=6>Junio</option>
            <option value=7>Julio</option>
            <option value=8>Agosto</option>
            <option value=9>Septiembre</option>
            <option value=10>Octubre</option>
            <option value=11>Noviembre</option>
            <option value=12>Diciembre</option>

        </select>
   </div>


    <figure class="highcharts-figure">
        <div id="container"></div>
        <p class="Descripcion">
         
        </p>
    </figure>

    <figure class="highcharts-figure">
        <div id="container2"></div>
        <p class="Descripcion">
         
        </p>
    </figure>


    <script type="application/javascript">
        finction resetPassword(){
            
        }
        function getDataCharts(){
            year = document.getElementById("selectYear").value
            month = document.getElementById("selectMonth").value
            alert("Año: "+year + "\nMes: "+ month);

            fillCharts({{failed_reports_by_year}},
                        {{missed_reports_by_year}},
                        {{succesful_reports_by_year}},
                        {{failed_reports_by_month}},
                        {{missed_reports_by_month}},
                        {{succesful_reports_by_month}});
            
        }

        function fillCharts(failed_reports_by_year,
        missed_reports_by_year,
        succesful_reports_by_year,
        failed_reports_by_month,
        missed_reports_by_month,
        succesful_reports_by_month){
            console.log(failed_reports_by_year);
        Highcharts.chart('container', {

title: {
    text: 'Informe anual'
},
credits: {
        enabled: false
    },

subtitle: {
    text: "Informe"
},

yAxis: {
    title: {
        text: 'Cantidad de Verificaciones'
    }
},

xAxis: {
    categories: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic']
    
},

legend: {
    layout: 'vertical',
    align: 'right',
    verticalAlign: 'middle'
},

plotOptions: {

   line:{
    dataLabels: {
                enabled: false
   },
   enableMouseTracking: true
        },

},

series: [{
    name: 'Omisiones',
    data: missed_reports_by_year 
}, {
    name: 'Errores',
    data: failed_reports_by_year
}, {
    name: 'Verificaciones exitosas',
    data: succesful_reports_by_year
},],

responsive: {
    rules: [{
        condition: {
            maxWidth:200
        },
        chartOptions: {
            legend: {
                layout: 'horizontal',
                align: 'center',
                verticalAlign: 'bottom'
            }
        }
    }]
}

});
    



        Highcharts.chart('container2', {

title: {
    text: 'Informe Mensual'
},
credits: {
        enabled: false
    },

subtitle: {
    text: "Informe"
},

yAxis: {
    title: {
        text: 'Cantidad Verificaciones'
    }
},

xAxis: {
    categories: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10',
                 '11', '12', '13', '14', '15', '16', '17', '18', '19', '20',
                 '21', '22', '23', '24', '25', '26', '27', '28', '29', '30',
                 '31' 
                ]
    
},

legend: {
    layout: 'vertical',
    align: 'right',
    verticalAlign: 'middle'
},

plotOptions: {

   line:{
    dataLabels: {
                enabled: false
   },
   enableMouseTracking: true
        },

},

series: [{
    name: 'Omisiones',
    data:  missed_reports_by_month 
}, {
    name: 'Errores',
    data: failed_reports_by_month
}, {
    name: 'Verificaciones exitosas',
    data: succesful_reports_by_month
},],

responsive: {
    rules: [{
        condition: {
            maxWidth:200
        },
        chartOptions: {
            legend: {
                layout: 'horizontal',
                align: 'center',
                verticalAlign: 'bottom'
            }
        }
    }]
}

});
                 }
    </script>

</body>

</html>
